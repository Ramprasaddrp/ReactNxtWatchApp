{"ast":null,"code":"var _jsxFileName = \"/home/workspace/reactjs/coding-practices/nxtWatchApp/src/components/Login/index.js\";\nimport { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Cookies from 'js-cookie';\nimport NxtThemeContext from '../../Context';\nimport { LoginContainer, LoginForm, NxtWedLogo, InputLabel, UserInput, CheckboxContainer, CheckboxLabel, InputCheckBox, LoginButton, ErrorMsg } from './StyledContainer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: '',\n      password: '',\n      displayPassword: false,\n      displayErrorMsg: false,\n      errorMsg: ''\n    };\n    this.updateUsername = event => {\n      this.setState({\n        username: event.target.value\n      });\n    };\n    this.submitSuccess = jwtToken => {\n      Cookies.set('jwt_token', jwtToken, {\n        expires: 30,\n        path: '/'\n      });\n      const {\n        history\n      } = this.props;\n      history.replace('/');\n    };\n    this.submitFailure = errorMsg => {\n      this.setState(prevState => ({\n        displayErrorMsg: !prevState.displayErrorMsg,\n        errorMsg\n      }));\n    };\n    this.postLoginDetails = async event => {\n      event.preventDefault();\n      const {\n        username,\n        password\n      } = this.state;\n      const userDetails = {\n        username,\n        password\n      };\n      console.log(password);\n      const url = 'https://apis.ccbp.in/login';\n      const options = {\n        method: 'POST',\n        body: JSON.stringify(userDetails)\n      };\n      const response = await fetch(url, options);\n      const data = await response.json();\n      if (response.ok) {\n        this.submitSuccess(data.jwt_token);\n        this.setState({\n          username: '',\n          password: '',\n          displayErrorMsg: false,\n          displayPassword: false,\n          errorMsg: ''\n        });\n      } else {\n        this.submitFailure(data.error_msg);\n      }\n    };\n    this.togglePasswordDisplay = () => {\n      this.setState(prevState => ({\n        displayPassword: !prevState.displayPassword\n      }));\n    };\n  }\n  render() {\n    const {\n      username,\n      password,\n      displayPassword,\n      displayErrorMsg,\n      errorMsg\n    } = this.state;\n    const jwtToken = Cookies.get('jwt_token');\n    if (jwtToken !== undefined) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 14\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(NxtThemeContext.Consumer, {\n      children: value => {\n        const {\n          isDarkTheme\n        } = value;\n        const theme = isDarkTheme ? 'dark' : '';\n        return /*#__PURE__*/_jsxDEV(LoginContainer, {\n          theme: theme,\n          onSubmit: this.postLoginDetails,\n          children: /*#__PURE__*/_jsxDEV(LoginForm, {\n            theme: theme,\n            children: [/*#__PURE__*/_jsxDEV(NxtWedLogo, {\n              src: isDarkTheme ? 'https://assets.ccbp.in/frontend/react-js/nxt-watch-logo-dark-theme-img.png' : 'https://assets.ccbp.in/frontend/react-js/nxt-watch-logo-light-theme-img.png',\n              alt: \"nxt watch logo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 111,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(InputLabel, {\n              theme: theme,\n              htmlFor: \"user_name\",\n              children: \"USERNAME\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 119,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(UserInput, {\n              theme: theme,\n              type: \"text\",\n              id: \"user_name\",\n              onChange: this.updateUsername,\n              value: username,\n              placeholder: \"Username\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 122,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(InputLabel, {\n              theme: theme,\n              htmlFor: \"password\",\n              children: \"PASSWORD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 130,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(UserInput, {\n              theme: theme,\n              type: displayPassword ? 'text' : 'password',\n              id: \"password\",\n              onChange: this.updatePassword,\n              value: password,\n              placeholder: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(CheckboxContainer, {\n              children: [/*#__PURE__*/_jsxDEV(InputCheckBox, {\n                id: \"show-password\",\n                type: \"checkbox\",\n                onClick: this.togglePasswordDisplay\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 142,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(CheckboxLabel, {\n                theme: theme,\n                htmlFor: \"show-password\",\n                children: \"Show Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 147,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 141,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(LoginButton, {\n              type: \"submit\",\n              children: \"Login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 151,\n              columnNumber: 17\n            }, this), displayErrorMsg && /*#__PURE__*/_jsxDEV(ErrorMsg, {\n              children: [\"*\", errorMsg]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 152,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 13\n        }, this);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default Login;","map":{"version":3,"names":["Component","Redirect","Cookies","NxtThemeContext","LoginContainer","LoginForm","NxtWedLogo","InputLabel","UserInput","CheckboxContainer","CheckboxLabel","InputCheckBox","LoginButton","ErrorMsg","jsxDEV","_jsxDEV","Login","constructor","args","state","username","password","displayPassword","displayErrorMsg","errorMsg","updateUsername","event","setState","target","value","submitSuccess","jwtToken","set","expires","path","history","props","replace","submitFailure","prevState","postLoginDetails","preventDefault","userDetails","console","log","url","options","method","body","JSON","stringify","response","fetch","data","json","ok","jwt_token","error_msg","togglePasswordDisplay","render","get","undefined","to","fileName","_jsxFileName","lineNumber","columnNumber","Consumer","children","isDarkTheme","theme","onSubmit","src","alt","htmlFor","type","id","onChange","placeholder","updatePassword","onClick"],"sources":["/home/workspace/reactjs/coding-practices/nxtWatchApp/src/components/Login/index.js"],"sourcesContent":["import {Component} from 'react'\n\nimport {Redirect} from 'react-router-dom'\n\nimport Cookies from 'js-cookie'\n\nimport NxtThemeContext from '../../Context'\n\nimport {\n  LoginContainer,\n  LoginForm,\n  NxtWedLogo,\n  InputLabel,\n  UserInput,\n  CheckboxContainer,\n  CheckboxLabel,\n  InputCheckBox,\n  LoginButton,\n  ErrorMsg,\n} from './StyledContainer'\n\nclass Login extends Component {\n  state = {\n    username: '',\n    password: '',\n    displayPassword: false,\n    displayErrorMsg: false,\n    errorMsg: '',\n  }\n\n   updateUsername = event => {\n    this.setState({username: event.target.value})\n  }\n\n  \n\n  submitSuccess = jwtToken => {\n    Cookies.set('jwt_token', jwtToken, {\n      expires: 30,\n      path: '/',\n    })\n    const {history} = this.props\n    history.replace('/')\n  }\n\n  submitFailure = errorMsg => {\n    this.setState(prevState => ({\n      displayErrorMsg: !prevState.displayErrorMsg,\n      errorMsg,\n    }))\n  }\n\n  postLoginDetails = async event => {\n    event.preventDefault()\n    const {username, password} = this.state\n    const userDetails = {\n      username,\n      password,\n    }\n    console.log(password)\n    const url = 'https://apis.ccbp.in/login'\n    const options = {\n      method: 'POST',\n      body: JSON.stringify(userDetails),\n    }\n    const response = await fetch(url, options)\n    const data = await response.json()\n    if (response.ok) {\n      this.submitSuccess(data.jwt_token)\n      this.setState({\n        username: '',\n        password: '',\n        displayErrorMsg: false,\n        displayPassword: false,\n        errorMsg: '',\n      })\n    } else {\n      this.submitFailure(data.error_msg)\n    }\n  }\n\n \n\n  \n\n  togglePasswordDisplay = () => {\n    this.setState(prevState => ({displayPassword: !prevState.displayPassword}))\n  }\n\n  render() {\n    const {\n      username,\n      password,\n      displayPassword,\n      displayErrorMsg,\n      errorMsg,\n    } = this.state\n\n    const jwtToken = Cookies.get('jwt_token')\n    if (jwtToken !== undefined) {\n      return <Redirect to=\"/\" />\n    }\n    return (\n      <NxtThemeContext.Consumer>\n        {value => {\n          const {isDarkTheme} = value\n          const theme = isDarkTheme ? 'dark' : ''\n          return (\n            <LoginContainer theme={theme} onSubmit={this.postLoginDetails}>\n              <LoginForm theme={theme}>\n                <NxtWedLogo\n                  src={\n                    isDarkTheme\n                      ? 'https://assets.ccbp.in/frontend/react-js/nxt-watch-logo-dark-theme-img.png'\n                      : 'https://assets.ccbp.in/frontend/react-js/nxt-watch-logo-light-theme-img.png'\n                  }\n                  alt=\"nxt watch logo\"\n                />\n                <InputLabel theme={theme} htmlFor=\"user_name\">\n                  USERNAME\n                </InputLabel>\n                <UserInput\n                  theme={theme}\n                  type=\"text\"\n                  id=\"user_name\"\n                  onChange={this.updateUsername}\n                  value={username}\n                  placeholder=\"Username\"\n                />\n                <InputLabel theme={theme} htmlFor=\"password\">\n                  PASSWORD\n                </InputLabel>\n                <UserInput\n                  theme={theme}\n                  type={displayPassword ? 'text' : 'password'}\n                  id=\"password\"\n                  onChange={this.updatePassword}\n                  value={password}\n                  placeholder=\"Password\"\n                />\n                <CheckboxContainer>\n                  <InputCheckBox\n                    id=\"show-password\"\n                    type=\"checkbox\"\n                    onClick={this.togglePasswordDisplay}\n                  />\n                  <CheckboxLabel theme={theme} htmlFor=\"show-password\">\n                    Show Password\n                  </CheckboxLabel>\n                </CheckboxContainer>\n                <LoginButton type=\"submit\">Login</LoginButton>\n                {displayErrorMsg && <ErrorMsg>*{errorMsg}</ErrorMsg>}\n              </LoginForm>\n            </LoginContainer>\n          )\n        }}\n      </NxtThemeContext.Consumer>\n    )\n  }\n}\n\nexport default Login\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}
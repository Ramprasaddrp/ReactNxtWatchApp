{"ast":null,"code":"var _jsxFileName = \"/home/workspace/reactjs/coding-practices/nxtWatchApp/src/components/Login/index.js\";\nimport { Component } from 'react';\nimport { Redirect } from 'react-router-dom';\nimport Cookies from 'js-cookie';\nimport NxtThemeContext from '../../Context';\nimport { LoginContainer, LoginForm, NxtWedLogo, InputLabel, UserInput, CheckboxContainer, CheckboxLabel, InputCheckBox, LoginButton, ErrorMsg } from './StyledContainer';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nclass Login extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: '',\n      password: '',\n      displayPassword: false,\n      displayErrorMsg: false,\n      errorMsg: ''\n    };\n    this.submitSuccess = jwtToken => {\n      Cookies.set('jwt_token', jwtToken, {\n        expires: 30,\n        path: '/'\n      });\n      const {\n        history\n      } = this.props;\n      history.replace('/');\n    };\n    this.submitFailure = errorMsg => {\n      this.setState(prevState => ({\n        displayErrorMsg: !prevState.displayErrorMsg,\n        errorMsg\n      }));\n    };\n    this.postLoginDetails = async event => {\n      event.preventDefault();\n      const {\n        username,\n        password\n      } = this.state;\n      const userDetails = {\n        username,\n        password\n      };\n      const url = 'https://apis.ccbp.in/login';\n      const options = {\n        method: 'POST',\n        body: JSON.stringify(userDetails)\n      };\n      const response = await fetch(url, options);\n      const data = await response.json();\n      console.log(data.error_msg);\n      if (response.ok) {\n        this.submitSuccess(data.jwt_token);\n        this.setState({\n          username: '',\n          password: '',\n          displayErrorMsg: false,\n          displayPassword: false,\n          errorMsg: ''\n        });\n      } else {\n        this.submitFailure(data.error_msg);\n      }\n    };\n    this.updateUsername = event => {\n      this.setState({\n        username: event.target.value\n      });\n    };\n    this.updatePassword = event => {\n      this.setState({\n        password: event.target.value\n      });\n    };\n    this.togglePasswordDisplay = () => {\n      this.setState(prevState => ({\n        displayPassword: !prevState.displayPassword\n      }));\n    };\n  }\n  render() {\n    const {\n      username,\n      password,\n      displayPassword,\n      displayErrorMsg,\n      errorMsg\n    } = this.state;\n    const jwtToken = Cookies.get('jwt_token');\n    if (jwtToken !== undefined) {\n      return /*#__PURE__*/_jsxDEV(Redirect, {\n        to: \"/\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 14\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(NxtThemeContext.Consumer, {\n      children: value => {\n        const {\n          isDarkTheme\n        } = value;\n        const theme = isDarkTheme ? 'dark' : '';\n        return /*#__PURE__*/_jsxDEV(LoginContainer, {\n          theme: theme,\n          onSubmit: this.postLoginDetails,\n          children: /*#__PURE__*/_jsxDEV(LoginForm, {\n            theme: theme,\n            children: [/*#__PURE__*/_jsxDEV(NxtWedLogo, {\n              src: isDarkTheme ? 'https://assets.ccbp.in/frontend/react-js/nxt-watch-logo-dark-theme-img.png' : 'https://assets.ccbp.in/frontend/react-js/nxt-watch-logo-light-theme-img.png',\n              alt: \"nxt watch logo\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 109,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(InputLabel, {\n              htmlFor: \"user_name\",\n              children: \"USERNAME\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 117,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(UserInput, {\n              type: \"text\",\n              id: \"user_name\",\n              onChange: this.updateUsername,\n              value: username,\n              placeholder: \"Username\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 118,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(InputLabel, {\n              htmlFor: \"password\",\n              children: \"PASSWORD\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 125,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(UserInput, {\n              type: displayPassword ? 'text' : 'password',\n              id: \"password\",\n              onChange: this.updatePassword,\n              value: password,\n              placeholder: \"Password\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(CheckboxContainer, {\n              children: [/*#__PURE__*/_jsxDEV(InputCheckBox, {\n                id: \"show-password\",\n                type: \"checkbox\",\n                onClick: this.togglePasswordDisplay\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 134,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(CheckboxLabel, {\n                htmlFor: \"show-password\",\n                children: \"Show Password\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 133,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(LoginButton, {\n              type: \"submit\",\n              children: \"Login\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 17\n            }, this), displayErrorMsg && /*#__PURE__*/_jsxDEV(ErrorMsg, {\n              children: [\"*\", errorMsg]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 144,\n              columnNumber: 37\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }, this);\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 7\n    }, this);\n  }\n}\nexport default Login;","map":{"version":3,"names":["Component","Redirect","Cookies","NxtThemeContext","LoginContainer","LoginForm","NxtWedLogo","InputLabel","UserInput","CheckboxContainer","CheckboxLabel","InputCheckBox","LoginButton","ErrorMsg","jsxDEV","_jsxDEV","Login","constructor","args","state","username","password","displayPassword","displayErrorMsg","errorMsg","submitSuccess","jwtToken","set","expires","path","history","props","replace","submitFailure","setState","prevState","postLoginDetails","event","preventDefault","userDetails","url","options","method","body","JSON","stringify","response","fetch","data","json","console","log","error_msg","ok","jwt_token","updateUsername","target","value","updatePassword","togglePasswordDisplay","render","get","undefined","to","fileName","_jsxFileName","lineNumber","columnNumber","Consumer","children","isDarkTheme","theme","onSubmit","src","alt","htmlFor","type","id","onChange","placeholder","onClick"],"sources":["/home/workspace/reactjs/coding-practices/nxtWatchApp/src/components/Login/index.js"],"sourcesContent":["import {Component} from 'react'\n\nimport {Redirect} from 'react-router-dom'\n\nimport Cookies from 'js-cookie'\n\nimport NxtThemeContext from '../../Context'\n\nimport {\n  LoginContainer,\n  LoginForm,\n  NxtWedLogo,\n  InputLabel,\n  UserInput,\n  CheckboxContainer,\n  CheckboxLabel,\n  InputCheckBox,\n  LoginButton,\n  ErrorMsg,\n} from './StyledContainer'\n\nclass Login extends Component {\n  state = {\n    username: '',\n    password: '',\n    displayPassword: false,\n    displayErrorMsg: false,\n    errorMsg: '',\n  }\n\n  submitSuccess = jwtToken => {\n    Cookies.set('jwt_token', jwtToken, {\n      expires: 30,\n      path: '/',\n    })\n    const {history} = this.props\n    history.replace('/')\n  }\n\n  submitFailure = errorMsg => {\n    this.setState(prevState => ({\n      displayErrorMsg: !prevState.displayErrorMsg,\n      errorMsg,\n    }))\n  }\n\n  postLoginDetails = async event => {\n    event.preventDefault()\n    const {username, password} = this.state\n    const userDetails = {\n      username,\n      password,\n    }\n    const url = 'https://apis.ccbp.in/login'\n    const options = {\n      method: 'POST',\n      body: JSON.stringify(userDetails),\n    }\n    const response = await fetch(url, options)\n    const data = await response.json()\n    console.log(data.error_msg)\n    if (response.ok) {\n      this.submitSuccess(data.jwt_token)\n      this.setState({\n        username: '',\n        password: '',\n        displayErrorMsg: false,\n        displayPassword: false,\n        errorMsg: '',\n      })\n    } else {\n      this.submitFailure(data.error_msg)\n    }\n  }\n\n  updateUsername = event => {\n    this.setState({username: event.target.value})\n  }\n\n  updatePassword = event => {\n    this.setState({password: event.target.value})\n  }\n\n  togglePasswordDisplay = () => {\n    this.setState(prevState => ({displayPassword: !prevState.displayPassword}))\n  }\n\n  render() {\n    const {\n      username,\n      password,\n      displayPassword,\n      displayErrorMsg,\n      errorMsg,\n    } = this.state\n\n    const jwtToken = Cookies.get('jwt_token')\n    if (jwtToken !== undefined) {\n      return <Redirect to=\"/\" />\n    }\n    return (\n      <NxtThemeContext.Consumer>\n        {value => {\n          const {isDarkTheme} = value\n          const theme = isDarkTheme ? 'dark' : ''\n          return (\n            <LoginContainer theme={theme} onSubmit={this.postLoginDetails}>\n              <LoginForm theme={theme}>\n                <NxtWedLogo\n                  src={\n                    isDarkTheme\n                      ? 'https://assets.ccbp.in/frontend/react-js/nxt-watch-logo-dark-theme-img.png'\n                      : 'https://assets.ccbp.in/frontend/react-js/nxt-watch-logo-light-theme-img.png'\n                  }\n                  alt=\"nxt watch logo\"\n                />\n                <InputLabel htmlFor=\"user_name\">USERNAME</InputLabel>\n                <UserInput\n                  type=\"text\"\n                  id=\"user_name\"\n                  onChange={this.updateUsername}\n                  value={username}\n                  placeholder=\"Username\"\n                />\n                <InputLabel htmlFor=\"password\">PASSWORD</InputLabel>\n                <UserInput\n                  type={displayPassword ? 'text' : 'password'}\n                  id=\"password\"\n                  onChange={this.updatePassword}\n                  value={password}\n                  placeholder=\"Password\"\n                />\n                <CheckboxContainer>\n                  <InputCheckBox\n                    id=\"show-password\"\n                    type=\"checkbox\"\n                    onClick={this.togglePasswordDisplay}\n                  />\n                  <CheckboxLabel htmlFor=\"show-password\">\n                    Show Password\n                  </CheckboxLabel>\n                </CheckboxContainer>\n                <LoginButton type=\"submit\">Login</LoginButton>\n                {displayErrorMsg && <ErrorMsg>*{errorMsg}</ErrorMsg>}\n              </LoginForm>\n            </LoginContainer>\n          )\n        }}\n      </NxtThemeContext.Consumer>\n    )\n  }\n}\n\nexport default Login\n"],"mappings":";AAAA,SAAQA,SAAS,QAAO,OAAO;AAE/B,SAAQC,QAAQ,QAAO,kBAAkB;AAEzC,OAAOC,OAAO,MAAM,WAAW;AAE/B,OAAOC,eAAe,MAAM,eAAe;AAE3C,SACEC,cAAc,EACdC,SAAS,EACTC,UAAU,EACVC,UAAU,EACVC,SAAS,EACTC,iBAAiB,EACjBC,aAAa,EACbC,aAAa,EACbC,WAAW,EACXC,QAAQ,QACH,mBAAmB;AAAA,SAAAC,MAAA,IAAAC,OAAA;AAE1B,MAAMC,KAAK,SAAShB,SAAS,CAAC;EAAAiB,YAAA,GAAAC,IAAA;IAAA,SAAAA,IAAA;IAAA,KAC5BC,KAAK,GAAG;MACNC,QAAQ,EAAE,EAAE;MACZC,QAAQ,EAAE,EAAE;MACZC,eAAe,EAAE,KAAK;MACtBC,eAAe,EAAE,KAAK;MACtBC,QAAQ,EAAE;IACZ,CAAC;IAAA,KAEDC,aAAa,GAAGC,QAAQ,IAAI;MAC1BxB,OAAO,CAACyB,GAAG,CAAC,WAAW,EAAED,QAAQ,EAAE;QACjCE,OAAO,EAAE,EAAE;QACXC,IAAI,EAAE;MACR,CAAC,CAAC;MACF,MAAM;QAACC;MAAO,CAAC,GAAG,IAAI,CAACC,KAAK;MAC5BD,OAAO,CAACE,OAAO,CAAC,GAAG,CAAC;IACtB,CAAC;IAAA,KAEDC,aAAa,GAAGT,QAAQ,IAAI;MAC1B,IAAI,CAACU,QAAQ,CAACC,SAAS,KAAK;QAC1BZ,eAAe,EAAE,CAACY,SAAS,CAACZ,eAAe;QAC3CC;MACF,CAAC,CAAC,CAAC;IACL,CAAC;IAAA,KAEDY,gBAAgB,GAAG,MAAMC,KAAK,IAAI;MAChCA,KAAK,CAACC,cAAc,CAAC,CAAC;MACtB,MAAM;QAAClB,QAAQ;QAAEC;MAAQ,CAAC,GAAG,IAAI,CAACF,KAAK;MACvC,MAAMoB,WAAW,GAAG;QAClBnB,QAAQ;QACRC;MACF,CAAC;MACD,MAAMmB,GAAG,GAAG,4BAA4B;MACxC,MAAMC,OAAO,GAAG;QACdC,MAAM,EAAE,MAAM;QACdC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACN,WAAW;MAClC,CAAC;MACD,MAAMO,QAAQ,GAAG,MAAMC,KAAK,CAACP,GAAG,EAAEC,OAAO,CAAC;MAC1C,MAAMO,IAAI,GAAG,MAAMF,QAAQ,CAACG,IAAI,CAAC,CAAC;MAClCC,OAAO,CAACC,GAAG,CAACH,IAAI,CAACI,SAAS,CAAC;MAC3B,IAAIN,QAAQ,CAACO,EAAE,EAAE;QACf,IAAI,CAAC5B,aAAa,CAACuB,IAAI,CAACM,SAAS,CAAC;QAClC,IAAI,CAACpB,QAAQ,CAAC;UACZd,QAAQ,EAAE,EAAE;UACZC,QAAQ,EAAE,EAAE;UACZE,eAAe,EAAE,KAAK;UACtBD,eAAe,EAAE,KAAK;UACtBE,QAAQ,EAAE;QACZ,CAAC,CAAC;MACJ,CAAC,MAAM;QACL,IAAI,CAACS,aAAa,CAACe,IAAI,CAACI,SAAS,CAAC;MACpC;IACF,CAAC;IAAA,KAEDG,cAAc,GAAGlB,KAAK,IAAI;MACxB,IAAI,CAACH,QAAQ,CAAC;QAACd,QAAQ,EAAEiB,KAAK,CAACmB,MAAM,CAACC;MAAK,CAAC,CAAC;IAC/C,CAAC;IAAA,KAEDC,cAAc,GAAGrB,KAAK,IAAI;MACxB,IAAI,CAACH,QAAQ,CAAC;QAACb,QAAQ,EAAEgB,KAAK,CAACmB,MAAM,CAACC;MAAK,CAAC,CAAC;IAC/C,CAAC;IAAA,KAEDE,qBAAqB,GAAG,MAAM;MAC5B,IAAI,CAACzB,QAAQ,CAACC,SAAS,KAAK;QAACb,eAAe,EAAE,CAACa,SAAS,CAACb;MAAe,CAAC,CAAC,CAAC;IAC7E,CAAC;EAAA;EAEDsC,MAAMA,CAAA,EAAG;IACP,MAAM;MACJxC,QAAQ;MACRC,QAAQ;MACRC,eAAe;MACfC,eAAe;MACfC;IACF,CAAC,GAAG,IAAI,CAACL,KAAK;IAEd,MAAMO,QAAQ,GAAGxB,OAAO,CAAC2D,GAAG,CAAC,WAAW,CAAC;IACzC,IAAInC,QAAQ,KAAKoC,SAAS,EAAE;MAC1B,oBAAO/C,OAAA,CAACd,QAAQ;QAAC8D,EAAE,EAAC;MAAG;QAAAC,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OAAE,CAAC;IAC5B;IACA,oBACEpD,OAAA,CAACZ,eAAe,CAACiE,QAAQ;MAAAC,QAAA,EACtBZ,KAAK,IAAI;QACR,MAAM;UAACa;QAAW,CAAC,GAAGb,KAAK;QAC3B,MAAMc,KAAK,GAAGD,WAAW,GAAG,MAAM,GAAG,EAAE;QACvC,oBACEvD,OAAA,CAACX,cAAc;UAACmE,KAAK,EAAEA,KAAM;UAACC,QAAQ,EAAE,IAAI,CAACpC,gBAAiB;UAAAiC,QAAA,eAC5DtD,OAAA,CAACV,SAAS;YAACkE,KAAK,EAAEA,KAAM;YAAAF,QAAA,gBACtBtD,OAAA,CAACT,UAAU;cACTmE,GAAG,EACDH,WAAW,GACP,4EAA4E,GAC5E,6EACL;cACDI,GAAG,EAAC;YAAgB;cAAAV,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACrB,CAAC,eACFpD,OAAA,CAACR,UAAU;cAACoE,OAAO,EAAC,WAAW;cAAAN,QAAA,EAAC;YAAQ;cAAAL,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,eACrDpD,OAAA,CAACP,SAAS;cACRoE,IAAI,EAAC,MAAM;cACXC,EAAE,EAAC,WAAW;cACdC,QAAQ,EAAE,IAAI,CAACvB,cAAe;cAC9BE,KAAK,EAAErC,QAAS;cAChB2D,WAAW,EAAC;YAAU;cAAAf,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACvB,CAAC,eACFpD,OAAA,CAACR,UAAU;cAACoE,OAAO,EAAC,UAAU;cAAAN,QAAA,EAAC;YAAQ;cAAAL,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAY,CAAC,eACpDpD,OAAA,CAACP,SAAS;cACRoE,IAAI,EAAEtD,eAAe,GAAG,MAAM,GAAG,UAAW;cAC5CuD,EAAE,EAAC,UAAU;cACbC,QAAQ,EAAE,IAAI,CAACpB,cAAe;cAC9BD,KAAK,EAAEpC,QAAS;cAChB0D,WAAW,EAAC;YAAU;cAAAf,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACvB,CAAC,eACFpD,OAAA,CAACN,iBAAiB;cAAA4D,QAAA,gBAChBtD,OAAA,CAACJ,aAAa;gBACZkE,EAAE,EAAC,eAAe;gBAClBD,IAAI,EAAC,UAAU;gBACfI,OAAO,EAAE,IAAI,CAACrB;cAAsB;gBAAAK,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OACrC,CAAC,eACFpD,OAAA,CAACL,aAAa;gBAACiE,OAAO,EAAC,eAAe;gBAAAN,QAAA,EAAC;cAEvC;gBAAAL,QAAA,EAAAC,YAAA;gBAAAC,UAAA;gBAAAC,YAAA;cAAA,OAAe,CAAC;YAAA;cAAAH,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OACC,CAAC,eACpBpD,OAAA,CAACH,WAAW;cAACgE,IAAI,EAAC,QAAQ;cAAAP,QAAA,EAAC;YAAK;cAAAL,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAa,CAAC,EAC7C5C,eAAe,iBAAIR,OAAA,CAACF,QAAQ;cAAAwD,QAAA,GAAC,GAAC,EAAC7C,QAAQ;YAAA;cAAAwC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAW,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAC3C;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACE,CAAC;MAErB;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACuB,CAAC;EAE/B;AACF;AAEA,eAAenD,KAAK"},"metadata":{},"sourceType":"module"}